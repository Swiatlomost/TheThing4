{"ts": "2025-11-16T14:03:33", "who": "Nodus", "why": "Scaffold task", "what": "Validator TLS uplink", "next": "Fill PDCA and start work", "tags": ["scaffold"]}
{"ts": "2025-11-16T14:04:08", "who": "Lumen", "why": "Scaffolding POI-213", "what": "Zadanie dodane po zamkniÄ™ciu POI-212 â€“ zakres: host/cert TLS dla walidatora, konfiguracja docker-compose i evidence handshake.", "next": "ZebraÄ‡ wymagania na host/domenÄ™ z Orin/Nodus i przygotowaÄ‡ plan wdroÅ¼enia TLS.", "tags": ["planning", "tls"]}
{"ts": "2025-11-16T18:13:53", "who": "Lumen", "why": "TLS upload test", "what": "APK (debug) ustawiona na validator.poi-lab.pl:443 (TLS) i upload z telefonu zakoÅ„czyÅ‚ siÄ™ STATUS_REJECTED (attestation_invalid_decode_http_status:401). Evidence: evidence/logcat-2025-11-16-tls.txt oraz validator-logs-2025-11-16-tls.txt.", "next": "SprawdziÄ‡ backendowe poÅ›wiadczenia Play Integrity API (401) i po poprawce powtÃ³rzyÄ‡ test.", "tags": ["evidence", "tls"]}
{"ts": "2025-11-16T18:57:01", "who": "Lumen", "why": "Play Integrity setup", "what": "Walidator TLS (validator.poi-lab.pl:443) dziaÅ‚a, debug build Å‚Ä…czy siÄ™ po TLS, ale Play Integrity API zwraca 401 (attestation_invalid_decode_http_status).", "next": "SprawdziÄ‡ w Play Console (IntegracyjnoÅ›Ä‡ aplikacji â†’ Play Integrity) czy projekt GCP i klucz sÄ… poprawnie powiÄ…zane, a po korekcie powtÃ³rzyÄ‡ upload szukajÄ…c STATUS_ACCEPTED.", "tags": ["tls", "attestation"]}
{"ts":"2025-11-16T21:45:16","who":"Lumen","why":"Play Integrity 401 analysis","what":"Walidator z TLS odrzuca batch z kodem 401 i komunikatem API keys are not supported – Play Integrity wymaga konta us³ugi/OAuth (service account + OAuth).","next":"Utworzyæ konto us³ugi z rol¹ Play Integrity Verifier, powi¹zaæ je w Play Console i zaimplementowaæ token Bearer w validatorze, potem powtórzyæ test.","tags":["attestation","oauth"]}
{"ts":"2025-11-16T23:12:43","who":"Lumen","why":"OAuth creds","what":"Przygotowa³em obs³ugê konta us³ugi (gcp_auth) i œrodowisko oczekuje PLAY_INTEGRITY_SERVICE_ACCOUNT_JSON, aby walidator autoryzowa³ siê przez OAuth zamiast samego API key.","next":"Skopiowaæ klucz JSON na serwer, ustawiæ zmienn¹ w .env i zrestartowaæ kontener, nastêpnie sprawdziæ upload z aplikacji Google Play.","tags":["oauth","validator"]}
{"ts":"2025-11-17T00:31:11","who":"Lumen","why":"Nonce mismatch in release","what":"Walidator z OAuth przyjmuje zapytania, ale release build z Google Play wpada w attestation_invalid_nonce_mismatch. Musimy zalogowaæ oczekiwany nonce po stronie walidatora, porównaæ go z tym z logcata i ustaliæ dlaczego ró¿ni¹ siê (prawdopodobnie timestamp/ WorkManager retry).","next":"Dodaæ debug log (expected_nonce vs token nonce), przeanalizowaæ ró¿nice i dostosowaæ generowanie nonce w release (np. ten sam timestamp Ms, expedite, brak opóŸnieñ).","tags":["nonce","play-integrity"]}
{"ts":"2025-11-22T13:09:12","who":"Lumen","why":"POI-213 resolved","what":"Root cause: Base64 padding mismatch (client 43 chars no-padding, Play Integrity 44 chars with-padding). Fix: Normalize both nonces via trim_end_matches('=') before comparison. Deployed to validator.poi-lab.pl - release build verified STATUS_ACCEPTED. Evidence: validator-logs-2025-11-22-poi213-resolved.txt. Commits: 4997e21 (debug logging), 2484fdc (fix).","next":"POI-213 done. Resume POI-103 (Kai quality framework). Consider cleanup NONCE_DEBUG after 1-2 days stable production.","tags":["resolved","nonce","base64"]}
