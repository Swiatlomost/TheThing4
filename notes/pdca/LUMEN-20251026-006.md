# LUMEN-20251026-006 - Canvas UX Morfogenezy

## Plan
- **Cel**: Uporzadkowac interakcje na plotnie Morfogenezy tak, aby tap/drag dzialaly precyzyjnie na heksach, ruch komorek byl ograniczony do obszaru organizmu, a zbedna lista tekstowa zostala zastapiona interakcja bezposrednia.
- **Zakres**: poprawa gestow (tap/drag), wprowadzenie clampowania pozycji do okregu plotna, porzadek UI (usuniecie listy tekstowej). Aktualizacja testow i sanity (`./gradlew test`, `./gradlew connectedDebugAndroidTest`) po kazdym etapie.
- **Zaleznosci**: model layoutu plotna w `MorphogenesisScreen.kt`, logika mutacji w `MorphogenesisViewModel.kt`, guard rails opisane w `docs/architecture/ADR-2025-10-25-morfogeneza.md`.

## Do
- Etap 1 (tap/drag): udostepnilem wspolny layout plotna, poprawilem gesty `pointerInput` (tap/drag) i aktualizacje offsetu selekcji w `MorphogenesisScreen.kt`. Testy: `./gradlew test` + `./gradlew connectedDebugAndroidTest` (2025-10-26) PASS.
- Etap 2 (clamp): dodalem clamp w `MorphogenesisViewModel.moveCell`, rozszerzylem limit o najwieksza komorke oraz ustabilizowalem okrag bezpieczenstwa na canvasie (stala skala). Wprowadzilem `rememberUpdatedState`, aby wolne przeciaganie nie resetowalo gestu. Testy: `./gradlew test` + `./gradlew connectedDebugAndroidTest` PASS.
- Etap 3 (UI tidy): usunalem tekstowa liste komorek, dodalem status zaznaczenia i wskazowke gestow w `MorphogenesisScreen.kt`. Testy: `./gradlew test` + `./gradlew connectedDebugAndroidTest` PASS.

## Check
- Wszystkie uruchomienia `./gradlew test` oraz `./gradlew connectedDebugAndroidTest` po kazdym etapie zakonczone sukcesem na Pixel_5(AVD) - 14.
- Manualnie: przeciaganie utrzymuje komorki w okregu, tap natychmiast zaznacza cel, a canvas nie zmienia skali przy przesuwaniu (UI prezentuje liczbe komorek i aktualne zaznaczenie).
- Nie zidentyfikowano regresji funkcjonalnych ani blokad aktywacji formy.

## Act
- Do obserwacji: brak undo/redo na plotnie (do wpisania w backlog kolejnego etapu).
- Przekazac Orinowi status po synchronizacji logow oraz taskow; upewnic sie, ze Kai dostanie update o scenariuszach clampowania.
- Po kolejnych iteracjach zweryfikowac, czy `BOUNDARY_MARGIN` = 1.05 wystarcza przy wiekszych promieniach (ewentualna adaptacja dynamiczna).
